<!DOCTYPE html>
<html>
<head>

  <meta charset="UTF-8">
  <title>CLS animation with cups</title>

  <link rel="stylesheet" href="css/style.css">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">

  <script type="text/javascript" src="library/paper-full.js"></script>
  <script type="text/paperscript" canvas="canvas">

  //variables
  var letters, letters2, letters3, letters4, letters5;
  var top, middle, bottom, path;
  var snowflakes1, snowflakes2, snowflakes3, snowflakes4, snowflakes5;
  var pos1, pos2, pos3, pos4, pos5;
  var tmp1, tmp2, tmp3, tmp4, tmp5;

  // letters
  var letters = new PointText({point: [0, 157.5], content: 'Geschäftsbericht', justification: 'right'});
  var letters2 = new PointText({point: [0, 57.5], content: '', justification: 'right'});
  var letters3 = new PointText({point: [0, 257.5], content: '', justification: 'right'});
  var letters4 = new PointText({point: [0, 157.5], content: '', justification: 'right'});
  var letters5 = new PointText({point: [615, 157.5], content: '', justification: 'left'});

  group1 = new Group(letters, letters2, letters3, letters4, letters5);
  group1.style = {fontFamily: 'Open Sans', fontSize: 20, fillColor: 'black'};

  // white background - middle
  var middle = new Rectangle(205, 0, 205, 300);
  var path = new Path.Rectangle(middle);
  path.fillColor = 'white';

  // function way1
  function way1(pos){x = 225; y = pos*300; return [x,y];}

  // function way2
  function way2(pos){x = 265; y = pos*300; return [x,y];}

  // function way3
  function way3(pos){x = 305; y = pos*300; return [x,y];}

  // function way4
  function way4(pos){x = 345; y = pos*300; return [x,y];}

  // function way5
  function way5(pos){x = 385; y = pos*300; return [x,y];}

  // cups 1
  var pos1 = [75/300, 150/300, 225/300, 300/300];
  snowflakes1 = [];
  for (i = 0; i < pos1.length; i++) {
    snowflakes1[i] = new Raster ('images/cup-1.png');
    snowflakes1[i].scale(0.060);
    snowflakes1[i].position = way1(pos1[i]);
  }
  var tmp1;

  // cups 2
  var pos2 = [37.5/300, 112.5/300, 187.5/300, 262.5/300];
  snowflakes2 = [];
  for (i = 0; i < pos2.length; i++) {
    snowflakes2[i] = new Raster ('images/cup-5.png');
    snowflakes2[i].scale(0.055);
    snowflakes2[i].position = way2(pos2[i]);
  }
  var tmp2;

  // cups 3
  var pos3 = [75/300, 150/300, 225/300, 300/300];
  snowflakes3 = [];
  for (i = 0; i < pos3.length; i++) {
    snowflakes3[i] = new Raster ('images/cup-4.png');
    snowflakes3[i].scale(0.060);
    snowflakes3[i].position = way3(pos3[i]);
  }
  var tmp3;

  // cups 4
  var pos4 = [37.5/300, 112.5/300, 187.5/300, 262.5/300];
  snowflakes4 = [];
  for (i = 0; i < pos4.length; i++) {
    snowflakes4[i] = new Raster ('images/cup-3.png');
    snowflakes4[i].scale(0.060);
    snowflakes4[i].position = way4(pos4[i]);
  }
  var tmp4;

  // cups 5
  var pos5 = [75/300, 150/300, 225/300, 300/300];
  snowflakes5 = [];
  for (i = 0; i < pos5.length; i++) {
    snowflakes5[i] = new Raster ('images/cup-2.png');
    snowflakes5[i].scale(0.060);
    snowflakes5[i].position = way5(pos5[i]);
  }
  var tmp5;

  // animation
  function onFrame(event) {

    // letters animation
    letters.position.x += 1.5;
    if (letters.bounds.right > 410) {letters.content = '';}

    letters2.position.x += 1.5;
    if (letters2.bounds.right > 410) {
      letters2.content = 'Rapport annuel'; letters2.fillColor = 'black';
      if (letters2.position.x > 527.5) {letters2.position.x = 527.5;}
    }

    letters3.position.x += 1.5;
    if (letters3.bounds.right > 410) {
      letters3.content = 'Relazione annuale'; letters3.fillColor = 'black';
      if (letters3.position.x > 515) {letters3.position.x = 515;}
    }

    letters4.position.x += 1.5;
    if (letters4.bounds.right > 410) {
      letters4.content = 'Annual report'; letters4.fillColor = 'black';
      if (letters4.position.x > 535) {letters4.position.x = 535;}
    }

    letters5.position.x -= 1.5;
    if (letters5.bounds.left < 205) {
      letters5.content = 'Geschäftsbericht';
      if (letters5.position.x < 95) {letters5.position.x = 95;}
    }

    // cups 1 animation
    for (i = 0; i < pos1.length; i++) {
      pos1[i] = (pos1[i] + 0.00075) % 1;
      tmp1 = way1(pos1[i]);
      snowflakes1[i].position.x = tmp1[0];
      snowflakes1[i].position.y = tmp1[1];
    }

    // cups 2 animation
    for (i = 0; i < pos2.length; i++) {
      pos2[i] = (pos2[i] + 0.00175) % 1;
      tmp2 = way2(pos2[i]);
      snowflakes2[i].position.x = tmp2[0];
      snowflakes2[i].position.y = tmp2[1];
    }

    // cups 3 animation
    for (i = 0; i < pos3.length; i++) {
      pos3[i] = (pos3[i] + 0.00100) % 1;
      tmp3 = way3(pos3[i]);
      snowflakes3[i].position.x = tmp3[0];
      snowflakes3[i].position.y = tmp3[1];
    }

    // cups 4 animation
    for (i = 0; i < pos4.length; i++) {
      pos4[i] = (pos4[i] + 0.00150) % 1;
      tmp4 = way4(pos4[i]);
      snowflakes4[i].position.x = tmp4[0];
      snowflakes4[i].position.y = tmp4[1];
    }

    // cups 5 animation
    for (i = 0; i < pos5.length; i++) {
      pos5[i] = (pos5[i] + 0.00125) % 1;
      tmp5 = way5(pos5[i]);
      snowflakes5[i].position.x = tmp5[0];
      snowflakes5[i].position.y = tmp5[1];
    }
  }

  // white background - top
  var top = new Rectangle(0, 0, 615, 25);
  var path = new Path.Rectangle(top);
  path.fillColor = 'white';

  // white background - bottom
  var bottom = new Rectangle(0, 275, 615, 50);
  var path = new Path.Rectangle(bottom);
  path.fillColor = 'white';

  </script>
  </head>
  <body>
    <canvas id="canvas" resize></canvas>
  </body>
  </html>
